<section id="contact" class="py-24 bg-primary-color relative overflow-hidden">
  <!-- Communication Background -->
  <div class="communication-background">
    <!-- Message Bubbles -->
    <div class="message-bubble" style="left: 10%; top: 15%; animation-delay: 0s;"></div>
    <div class="message-bubble" style="left: 85%; top: 25%; animation-delay: 2s;"></div>
    <div class="message-bubble" style="left: 20%; top: 70%; animation-delay: 4s;"></div>
    <div class="message-bubble" style="left: 75%; top: 80%; animation-delay: 1s;"></div>
    
    <!-- Email Icons -->
    <div class="floating-email" style="left: 5%; top: 40%; animation-delay: 0.5s;">✉</div>
    <div class="floating-email" style="left: 90%; top: 60%; animation-delay: 3s;">✉</div>
    <div class="floating-email" style="left: 15%; top: 85%; animation-delay: 5s;">✉</div>
    
    <!-- Connection Lines -->
    <div class="connection-line" style="left: 30%; top: 20%; width: 40%; transform: rotate(15deg); animation-delay: 1s;"></div>
    <div class="connection-line" style="left: 10%; top: 50%; width: 60%; transform: rotate(-10deg); animation-delay: 3s;"></div>
    <div class="connection-line" style="left: 50%; top: 75%; width: 35%; transform: rotate(25deg); animation-delay: 2s;"></div>
    
    <!-- Communication Nodes -->
    <div class="comm-node" style="left: 25%; top: 30%; animation-delay: 0s;"></div>
    <div class="comm-node" style="left: 70%; top: 45%; animation-delay: 2.5s;"></div>
    <div class="comm-node" style="left: 45%; top: 65%; animation-delay: 1.5s;"></div>
    
    <!-- Floating Words -->
    <div class="floating-word" style="left: 8%; top: 55%; animation-delay: 0s;">Connect</div>
    <div class="floating-word" style="left: 80%; top: 35%; animation-delay: 2s;">Collaborate</div>
    <div class="floating-word" style="left: 35%; top: 85%; animation-delay: 4s;">Create</div>
    <div class="floating-word" style="left: 65%; top: 15%; animation-delay: 1s;">Communicate</div>
    
    <!-- Signal Waves -->
    <div class="signal-wave" style="left: 15%; top: 25%; animation-delay: 0s;"></div>
    <div class="signal-wave" style="left: 85%; top: 70%; animation-delay: 3s;"></div>
    <div class="signal-wave" style="left: 50%; top: 50%; animation-delay: 1.5s;"></div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16" appScrollAnimation animationClass="animate-fade-in-up">
      <h2 class="text-4xl font-bold mb-4">Get In <span class="text-accent-color">Touch</span></h2>
      <div class="w-20 h-1 bg-accent-color mx-auto"></div>
      <p class="text-text-secondary mt-4 max-w-2xl mx-auto">
        Have a project in mind or want to collaborate? Feel free to reach out!
      </p>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-x-24">
      <!-- Contact Form Column -->
      <div class="flex flex-col mx-auto w-full max-w-md lg:mx-0 lg:max-w-none">
        <div 
          class="bg-secondary-color rounded-lg p-8 shadow-lg flex-grow h-full flex flex-col" 
          appScrollAnimation 
          animationClass="animate-fade-in-right">
          
          <h3 class="text-2xl font-bold mb-6">Send Message</h3>
          
          <!-- Success Message -->
          <div *ngIf="formSuccess" class="mb-6 p-4 bg-green-500/20 text-green-300 rounded-md">
            Your message has been sent successfully! I'll get back to you soon.
          </div>
          
          <!-- Error Message -->
          <div *ngIf="formError" class="mb-6 p-4 bg-red-500/20 text-red-300 rounded-md">
            There was an error sending your message. Please try again later.
          </div>
          
          <!-- Contact Form -->
          <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="flex-grow flex flex-col">
            <div class="space-y-6 flex-grow">
              <!-- Name Input -->
              <div class="form-field">
                <label for="name" class="block text-text-secondary mb-2 font-medium">Name</label>
                <input 
                  type="text" 
                  id="name" 
                  formControlName="name" 
                  class="w-full px-4 py-3 rounded-md bg-primary-color border border-accent-color/20 text-text-color focus:outline-none focus:border-accent-color transition-colors"
                  [ngClass]="{'border-red-500': formSubmitted && contactForm.get('name')?.invalid}"
                  placeholder="Your full name">
                <div class="error-container min-h-[20px] mt-1">
                  <div *ngIf="formSubmitted && contactForm.get('name')?.errors" class="text-red-400 text-sm">
                    <span *ngIf="contactForm.get('name')?.errors?.['required']">Name is required</span>
                    <span *ngIf="contactForm.get('name')?.errors?.['minlength']">Name must be at least 2 characters</span>
                  </div>
                </div>
              </div>
              
              <!-- Email Input -->
              <div class="form-field">
                <label for="email" class="block text-text-secondary mb-2 font-medium">Email</label>
                <input 
                  type="email" 
                  id="email" 
                  formControlName="email" 
                  class="w-full px-4 py-3 rounded-md bg-primary-color border border-accent-color/20 text-text-color focus:outline-none focus:border-accent-color transition-colors"
                  [ngClass]="{'border-red-500': formSubmitted && contactForm.get('email')?.invalid}"
                  placeholder="your.email@example.com">
                <div class="error-container min-h-[20px] mt-1">
                  <div *ngIf="formSubmitted && contactForm.get('email')?.errors" class="text-red-400 text-sm">
                    <span *ngIf="contactForm.get('email')?.errors?.['required']">Email is required</span>
                    <span *ngIf="contactForm.get('email')?.errors?.['email']">Please enter a valid email</span>
                  </div>
                </div>
              </div>
              
              <!-- Subject Input -->
              <div class="form-field">
                <label for="subject" class="block text-text-secondary mb-2 font-medium">Subject</label>
                <input 
                  type="text" 
                  id="subject" 
                  formControlName="subject" 
                  class="w-full px-4 py-3 rounded-md bg-primary-color border border-accent-color/20 text-text-color focus:outline-none focus:border-accent-color transition-colors"
                  [ngClass]="{'border-red-500': formSubmitted && contactForm.get('subject')?.invalid}"
                  placeholder="What's this about?">
                <div class="error-container min-h-[20px] mt-1">
                  <div *ngIf="formSubmitted && contactForm.get('subject')?.errors" class="text-red-400 text-sm">
                    <span *ngIf="contactForm.get('subject')?.errors?.['required']">Subject is required</span>
                    <span *ngIf="contactForm.get('subject')?.errors?.['minlength']">Subject must be at least 5 characters</span>
                  </div>
                </div>
              </div>
              
              <!-- Message Input -->
              <div class="form-field flex-grow">
                <label for="message" class="block text-text-secondary mb-2 font-medium">Message</label>
                <textarea 
                  id="message" 
                  formControlName="message" 
                  class="w-full px-4 py-3 rounded-md bg-primary-color border border-accent-color/20 text-text-color focus:outline-none focus:border-accent-color transition-colors resize-none flex-grow min-h-[120px]"
                  [ngClass]="{'border-red-500': formSubmitted && contactForm.get('message')?.invalid}"
                  placeholder="Tell me about your project or idea..."
                  style="height: calc(100% - 60px);"></textarea>
                <div class="error-container min-h-[20px] mt-1">
                  <div *ngIf="formSubmitted && contactForm.get('message')?.errors" class="text-red-400 text-sm">
                    <span *ngIf="contactForm.get('message')?.errors?.['required']">Message is required</span>
                    <span *ngIf="contactForm.get('message')?.errors?.['minlength']">Message must be at least 10 characters</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Submit Button -->
            <div class="mt-6 pt-4 border-t border-accent-color/10">
              <button
                type="submit" 
                [disabled]="contactForm.invalid && formSubmitted"
                class="w-full px-6 py-3 bg-accent-color text-button-text rounded-md hover:bg-accent-color/90 disabled:bg-accent-color/50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center space-x-2 font-medium">
                <span>Send Message</span>
                <fa-icon [icon]="faPaperPlane" class="transform transition-transform group-hover:translate-x-1"></fa-icon>
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Contact Information Column -->
      <div class="flex flex-col mx-auto w-full max-w-md lg:mx-0 lg:max-w-none" appScrollAnimation animationClass="animate-fade-in-left">
        <!-- Information wrapper -->
        <div class="bg-secondary-color rounded-lg p-8 shadow-lg flex flex-col h-full">
          <div class="space-y-8 flex-grow">
            <h3 class="text-2xl font-bold mb-6">Contact Information</h3>
            
            <div class="space-y-8 mb-12">
              <!-- Email -->
              <div class="contact-info-item">
                <div class="contact-info-icon">
                  <fa-icon [icon]="faEnvelope" size="lg"></fa-icon>
                </div>
                <div>
                  <h4 class="text-lg font-semibold text-text-color">Email</h4>
                  <a [href]="'mailto:' + email" class="text-text-secondary hover:text-accent-color transition-colors">
                    {{ email }}
                  </a>
                </div>
              </div>
              
              <!-- Location -->
              <div class="contact-info-item">
                <div class="contact-info-icon">
                  <fa-icon [icon]="faMapMarkerAlt" size="lg"></fa-icon>
                </div>
                <div>
                  <h4 class="text-lg font-semibold text-text-color">Location</h4>
                  <p class="text-text-secondary">{{ location }}</p>
                </div>
              </div>
            </div>
            
            <!-- Social Links -->
            <div>
              <h3 class="text-xl font-semibold mb-4">Connect With Me</h3>
              <div class="social-links">
                <a 
                  *ngFor="let link of socialLinks" 
                  [href]="link.url" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  class="social-link">
                  <fa-icon [icon]="getIcon(link.platform)"></fa-icon>
                </a>
              </div>
            </div>

            <!-- Q-Learning Tic Tac Toe Game - Hidden on mobile -->
            <div class="mt-8 p-3 bg-primary-color rounded-lg shadow-md hidden lg:block" appScrollAnimation animationClass="animate-fade-in-up">
              <div class="flex justify-between items-center mb-2">
                <h4 class="text-base font-semibold text-text-color">Tic Tac Toe</h4>
                <div class="flex space-x-2">
                  <button 
                    (click)="toggleLearning()" 
                    class="text-xs py-1 px-2 rounded-md bg-accent-color/20 hover:bg-accent-color/30 text-accent-color transition-colors flex items-center"
                    [class.bg-accent-color]="showLearningStats"
                    [class.text-white]="showLearningStats">
                    <fa-icon [icon]="faRobot" class="mr-1"></fa-icon>
                    <span>{{ showLearningStats ? 'Learning: ON' : 'Learning: OFF' }}</span>
                  </button>
                </div>
              </div>
              
              <!-- Game Grid -->
              <div class="grid grid-cols-3 gap-1 max-w-[120px] mx-auto">
                <ng-container *ngFor="let row of [0,1,2]; let r = index">
                  <ng-container *ngFor="let col of [0,1,2]; let c = index">
                    <button
                      (click)="handleCellClick(r, c)"
                      class="w-10 h-10 bg-secondary-color border border-text-color/50 rounded flex items-center justify-center text-lg text-accent-color hover:bg-accent-color/10 transition-colors"
                      style="border-color: var(--text-color)">
                      {{ gameService.gameState.board[r][c] }}
                    </button>
                  </ng-container>
                </ng-container>
              </div>
              
              <!-- Game Status -->
              <div class="mt-2 text-center text-text-color text-xs">
                <span *ngIf="gameService.gameState.status === 'playing'">
                  <span *ngIf="botThinking" class="text-accent-color">AI thinking...</span>
                  <span *ngIf="!botThinking">Current: {{ gameService.gameState.currentPlayer }}</span>
                </span>
                <span *ngIf="gameService.gameState.status === 'won'" class="text-accent-color">
                  Winner: {{ gameService.gameState.winner }}
                </span>
                <span *ngIf="gameService.gameState.status === 'draw'" class="text-accent-color">
                  It's a draw!
                </span>
              </div>
              
              <!-- Learning Stats (conditionally shown) -->
              <div *ngIf="showLearningStats" class="mt-3 bg-secondary-color/50 rounded p-2 text-xs">
                <div class="flex justify-between items-center mb-1">
                  <span class="flex items-center">
                    <fa-icon [icon]="faChartLine" class="mr-1 text-accent-color"></fa-icon>
                    Learning Stats
                  </span>
                  <button 
                    (click)="resetLearning()" 
                    class="text-xs py-0.5 px-1.5 rounded bg-accent-color/20 hover:bg-accent-color/40 text-accent-color transition-colors">
                    Reset
                  </button>
                </div>
                <div class="grid grid-cols-2 gap-x-2 gap-y-1">
                  <div>Games: {{ gameService.stats.gamesPlayed }}</div>
                  <div>States: {{ gameService.stats.qTableSize }}</div>
                  <div>AI Wins: {{ gameService.stats.botWins }}</div>
                  <div>Player Wins: {{ gameService.stats.playerWins }}</div>
                  <div>Draws: {{ gameService.stats.draws }}</div>
                  <div>Exploration: {{ (gameService.stats.explorationRate * 100).toFixed(0) }}%</div>
                </div>
              </div>
              
              <!-- Game Controls -->
              <div class="mt-2 text-center">
                <button *ngIf="gameService.gameState.status !== 'playing'"
                  class="px-3 py-1 bg-accent-color text-button-text rounded-md hover:bg-accent-color/90 transition-colors text-sm"
                  (click)="resetGame()">New Game</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
